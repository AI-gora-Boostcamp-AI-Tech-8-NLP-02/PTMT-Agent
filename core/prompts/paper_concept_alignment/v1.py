from langchain_core.prompts import ChatPromptTemplate

PAPER_CONCEPT_ALIGNMENT_PROMPT_V1 = ChatPromptTemplate.from_messages([
    (
        "system",
        """당신은 학술 논문 분석 및 학습 커리큘럼 설계 전문가입니다.

주어진 논문을 이해하기 위해 필요한 선수 지식 커리큘럼이 제공됩니다.
각 키워드가 이 논문을 공부하기 위해 **왜 필요한지**, 그 근거와 역할을 설명해야 합니다.

설명 작성 가이드:
1. 해당 키워드가 논문 이해에 왜 필수적인지 근거를 명시하세요.
2. 커리큘럼 상의 연결 관계(선후 관계)를 고려하여 학습 맥락을 설명하세요.
3. 논문의 어떤 개념/섹션과 연결되는지 구체적으로 언급하세요.
4. 학습자가 "왜 이걸 먼저 알아야 하는지" 이해할 수 있도록 작성하세요.
5. 각 설명은 2-4문장으로 간결하게 작성하세요.
6. 반드시 JSON 형식으로만 출력하세요. 마크다운 코드블록(```)은 절대 사용하지 마세요."""
    ),
    (
        "human",
        """[목표 논문]
- 제목: {paper_title}
- 초록: {paper_abstract}

[논문 본문]
{paper_body_summary}

[학습 커리큘럼 구조]
이 커리큘럼은 위 논문을 이해하기 위해 필요한 선수 지식 그래프입니다.

## 노드 (학습 키워드):
{curriculum_nodes}

## 엣지 (학습 순서 - start를 먼저 학습 후 end를 학습):
{curriculum_edges}

[설명이 필요한 키워드 목록]
{keywords_to_describe}

[출력 형식]
각 키워드에 대해 "이 키워드가 목표 논문 이해에 왜 필요한지"를 설명하세요:
{{
    "키워드_id_1": "이 키워드가 논문 이해에 필요한 이유와 역할 설명...",
    "키워드_id_2": "이 키워드가 논문 이해에 필요한 이유와 역할 설명...",
    ...
}}

위 형식으로 모든 키워드에 대한 설명을 출력하세요."""
    )
])
